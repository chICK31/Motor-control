<!DOCTYPE html>
<html>
<head>
    <title>ESP Web Server</title>
</head>
<body>
    <h1>ESP Web Server</h1>
    <p>JSON Control</p>
    <button onclick="turnOn()">Turn On</button>
    <button onclick="turnOff()">Turn Off</button>
    <p id="status">Status: Off</p>  <!-- Status display at the bottom -->

    <script>
        var isOn = false;

        function turnOn() {
            isOn = true;
            updateStatus();
            setTimeout(turnOff, 10000);  // Automatically turn off after 10 seconds
        }

        function turnOff() {
            isOn = false;
            updateStatus();
        }

        function updateStatus() {
            var xhr = new XMLHttpRequest();
            var command = isOn ? 'on' : 'off';
            xhr.open('GET', '/control?command=' + command, true);  // Use '/control?' before the command
            xhr.send();
            var statusElem = document.getElementById('status');
            statusElem.textContent = 'Status: ' + (isOn ? 'On' : 'Off');  // Update the status display
        }
    </script>
</body>
</html>
