<!DOCTYPE html>
<html>
<head>
    <title>ESP Web Server</title>
</head>
<body>
    <h1>ESP Web Server</h1>
    <p>JSON Control</p>
    <button onclick="turnOn()">Turn On</button>
    <button onclick="turnOff()">Turn Off</button>
    <p id="status">Status: Off</p>  <!-- Status display at the bottom -->

    <script>
        var isOn = false;

        function turnOn() {
            isOn = true;
            updateStatus();
            setTimeout(turnOff, 10000);  // Automatically turn off after 10 seconds
        }

        function turnOff() {
            isOn = false;
            updateStatus();
        }

        function updateStatus() {
    var xhr = new XMLHttpRequest();
    var timestamp = Date.now();  // Get the current timestamp
    var command = isOn ? 'on' : 'off';
    
    // Append the timestamp to the URL to bypass caching
    var github_json_url = 'https://raw.githubusercontent.com/chICK31/Motor-control/main/data.json?' + timestamp;
    
    xhr.open('GET', github_json_url, true);
    xhr.send();
    var statusElem = document.getElementById('status');
    statusElem.textContent = 'Status: ' + (isOn ? 'On' : 'Off');
}

    </script>
</body>
</html>
